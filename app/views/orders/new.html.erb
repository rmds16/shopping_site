<h5>Delivery Address</h5>

<%= form_for(@order) do |f| %>
<%= render 'shared/error_messages', :target => @address %>

<% if @addresses.size > 0 %>

<%= f.radio_button :existing_address, "existing", :onclick => "$('#new_address').hide()" %> Use existing address

<%= f.collection_select(:address_id, @addresses, :id, :full_address) %>

<%= f.radio_button :existing_address, "new", :onclick => "$('#new_address').show()" %> Add new address

<% else %>

<%= f.hidden_field :existing_address %>

<% end %>

  <div id="new_address" <% if @order.existing_address == "existing" %>style="display: none;"<% end %>>
  <%= fields_for :address do |a| %>
  <div class="field">
    <%= a.select(:title, options_for_select(['Mr','Miss','Mrs','Ms'])) %>
  </div>
  <div class="field">
    <%= a.label :first_name %><br />
    <%= a.text_field :first_name %>
  </div>
  <div class="field">
    <%= a.label :last_name %><br />
    <%= a.text_field :last_name %>
  </div>
  <div>
    <%= a.label :organisation %><br />
    <%= a.text_field :organisation %>
  </div>
  <div>
    <%= a.label :building %><br />
    <%= a.text_field :building %>
  </div>
  <div>
    <%= a.label :street %><br />
    <%= a.text_field :street %>
  </div>
  <div>
    <%= a.label :town %><br />
    <%= a.text_field :town %>
  </div>
  <div>
    <%= a.label :county %><br />
    <%= a.text_field :county %>
  </div>
  <div>
    <%= a.label :post_code %><br />
    <%= a.text_field :post_code %>
  </div>
  <div>
   <%= a.label :country %><br />
   <%= a.text_field :country %>
  </div>
  <% end %>
  </div>
  <div class="actions">
    <%= f.submit "Continue" %>
  </div>
<% end %>
